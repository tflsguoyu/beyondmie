<scene version="0.6.0">
    <integrator type="volpath">
        <integer name="maxDepth" value="1000"/>
        <integer name="rrDepth" value="1000"/>
    </integrator>

    <sensor type="perspective">
        <string name="fovAxis" value="smaller"/>
        <float name="fov" value="30"/>

        <transform name="toWorld">
            <lookAt origin="0 0 1.1" target="0 0 0" up="0 1 0"/>
        </transform>

        <sampler type="independent">
            <integer name="sampleCount" value="8"/>
        </sampler>

        <film id="film" type="hdrfilm">
            <integer name="width" value="256"/>
            <integer name="height" value="512"/>
            <string name="pixelFormat" value="rgb"/>
            <boolean name="banner" value="false"/>
        </film>
    </sensor>

    <medium type="homogeneous" id="myMedium_tab">
        <float name="scale" value="$scale"/>
        <rgb name="sigmaT" value="$sigma_t"/>
        <rgb name="albedo" value="$albedo"/>

        <phase type="tabulated4D">
            <string name="filename" value="$fn"/>
        </phase>

    </medium>

    <bsdf type="diffuse" id="myBSDF_diffuse"/>
    
    <bsdf type="dielectric" id="myBSDF_dielectric">
        <float name="intIOR" value="1.504"/>
        <float name="extIOR" value="1.0"/>
    </bsdf>

    <bsdf type="null" id="myBSDF_null"/>

    <texture type="checkerboard" id="texture-checkerboard">
        <rgb name="color0" value="0.4" />
        <rgb name="color1" value="0.2" />
        <float name="uscale" value="8.0"/>
        <float name="vscale" value="8.0"/>
    </texture>

    <bsdf type="diffuse" id="bsdf-plane">
        <ref name="reflectance" id="texture-checkerboard" />
    </bsdf>

    <bsdf type="diffuse" id="bsdf-plane2">
        <rgb name="reflectance" value="0.2, 0.2, 0.2"/>
    </bsdf>

    <shape type="obj">
        <string name="filename" value="mesh/lucy.obj"/>
        <transform name="toWorld">
            <scale x="1" y="1" z="1"/>
            <rotate x="1" angle="0"/>
            <translate x="0" y="0" z="0"/>
        </transform>

        <!-- Diffuse -->
        <!-- <ref id="myBSDF_diffuse"/> -->
        
        <!-- Tabulated -->
        <ref id="myBSDF_null"/>
        <ref name="interior" id="myMedium_tab"/>
    </shape>

    <shape type="serialized" id="shape-plane">
        <string name="filename" value="mesh/matpreview.serialized" />
        <integer name="shapeIndex" value="0"/>
        <transform name="toWorld">
            <rotate x="1" angle="-90"/>
            <scale x="2" y="2" z="2"/>
            <translate x="0" y="-0.5" z="-1.5"/>
        </transform>
        <ref name="bsdf" id="bsdf-plane2"/>
    </shape>

<!--    <emitter type="envmap">
        <string name="filename" value="env/at_the_window.hdr"/> 
        <transform name="toWorld">
            <scale x="1" y="1" z="1"/>
            <rotate y="1" angle="-90"/>
            <translate x="0" y="0" z="0"/>
        </transform>    
        <float name="scale" value="1"/>
    </emitter> -->

    <shape type="sphere">
        <transform name="toWorld">
            <rotate x="1" angle="0"/>
            <scale x="0.1" y="0.1" z="0.1"/>
            <translate x="0.7" y="0.6" z="-1"/>
        </transform>    
        <emitter type="area">
            <spectrum name="radiance" value="200"/>
        </emitter>
    </shape>

</scene>
